# Implementation Notes — ADR0004

## Goal of ADR0004 (implemented)
Add a minimal stats/query layer and wire it into policy decision-making.

## What was implemented
1) InMemoryStatsStore
- ingest match result + events
- compute:
  - action counts from decision_provided events
  - win/loss/draw from MatchResult.details

2) DecisionContext.stats
- MatchRunner passes a StatsQuery object into DecisionContext
- policies can read stats during decide()

3) SimRunner
- runs N sequential matches
- updates stats store after each match
- passes the same stats query into each match

## Assumptions
- MatchResult.details includes:
  - "actors": list[str]
  - "winner": str | None

## Notes
This ADR is intentionally “MVP”.
Future improvements may include:
- persistent store
- richer query APIs
- per-opponent / per-game / per-phase stats
